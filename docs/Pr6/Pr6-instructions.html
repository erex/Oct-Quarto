<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.219">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Centre for Research into Ecological and Environmental Modelling   University of St Andrews">
<meta name="dcterms.date" content="2022-10-26">

<title>Distance sampling lab book - Distance sampling survey design</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script src="../site_libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="../site_libs/jquery-1.12.4/jquery.min.js"></script>
<link href="../site_libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="../site_libs/leaflet-1.3.1/leaflet.js"></script>
<link href="../site_libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="../site_libs/proj4-2.6.2/proj4.min.js"></script>
<script src="../site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="../site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="../site_libs/leaflet-binding-2.1.1/leaflet.js"></script>
<script src="../site_libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="../site_libs/leaflet-providers-plugin-2.1.1/leaflet-providers-plugin.js"></script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Distance sampling lab book</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../Pr1/sampling.html">
 <span class="menu-text">Sampling</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../Pr2/detnfns.html">
 <span class="menu-text">Detection functions</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../Pr3/criticism.html">
 <span class="menu-text">Criticism</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../Pr4/precision.html">
 <span class="menu-text">Precision</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../Pr5/points.html">
 <span class="menu-text">Points</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../Pr6/design.html" aria-current="page">
 <span class="menu-text">Design</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../Pr7/strata.html">
 <span class="menu-text">Strata</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../Pr8/covariates.html">
 <span class="menu-text">Covariates</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../Pr9/multipliers.html">
 <span class="menu-text">Multipliers</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../extras/extras.html">
 <span class="menu-text">Extras</span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">Distance sampling survey design</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Pr6/design.html" class="sidebar-item-text sidebar-link">Survey design practical 6</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Pr6/Pr6-instructions.html" class="sidebar-item-text sidebar-link active">Distance sampling survey design</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Pr6/leaflet-demo.html" class="sidebar-item-text sidebar-link">Distance sampling survey design supplement</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Pr6/effort-and-power.html" class="sidebar-item-text sidebar-link">Effort and power calculations for line transect surveys</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Pr6/Pr6-solution.html" class="sidebar-item-text sidebar-link">Distance sampling survey design <strong>solution</strong></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#systematic-parallel-line-aerial-survey-of-marine-mammals-in-st-andrews-bay" id="toc-systematic-parallel-line-aerial-survey-of-marine-mammals-in-st-andrews-bay" class="nav-link" data-scroll-target="#systematic-parallel-line-aerial-survey-of-marine-mammals-in-st-andrews-bay">Systematic parallel line aerial survey of marine mammals in St Andrews bay</a>
  <ul class="collapse">
  <li><a href="#study-region" id="toc-study-region" class="nav-link" data-scroll-target="#study-region">Study Region</a></li>
  <li><a href="#coverage" id="toc-coverage" class="nav-link" data-scroll-target="#coverage">Coverage</a></li>
  <li><a href="#systematic-parallel-design" id="toc-systematic-parallel-design" class="nav-link" data-scroll-target="#systematic-parallel-design">Systematic Parallel Design</a></li>
  <li><a href="#zigzag-design" id="toc-zigzag-design" class="nav-link" data-scroll-target="#zigzag-design">Zigzag Design</a></li>
  </ul></li>
  <li><a href="#point-transect-bird-survey-in-tentsmuir-forest" id="toc-point-transect-bird-survey-in-tentsmuir-forest" class="nav-link" data-scroll-target="#point-transect-bird-survey-in-tentsmuir-forest">Point Transect Bird Survey in Tentsmuir Forest</a>
  <ul class="collapse">
  <li><a href="#projecting-your-study-region" id="toc-projecting-your-study-region" class="nav-link" data-scroll-target="#projecting-your-study-region">Projecting your Study Region</a></li>
  <li><a href="#coverage-1" id="toc-coverage-1" class="nav-link" data-scroll-target="#coverage-1">Coverage</a></li>
  <li><a href="#design" id="toc-design" class="nav-link" data-scroll-target="#design">Design</a></li>
  <li><a href="#generate-a-survey" id="toc-generate-a-survey" class="nav-link" data-scroll-target="#generate-a-survey">Generate a Survey</a>
  <ul class="collapse">
  <li><a href="#save-coordinates-to-a-file" id="toc-save-coordinates-to-a-file" class="nav-link" data-scroll-target="#save-coordinates-to-a-file">Save coordinates to a file</a></li>
  </ul></li>
  <li><a href="#assessing-coverage-and-design-statistics" id="toc-assessing-coverage-and-design-statistics" class="nav-link" data-scroll-target="#assessing-coverage-and-design-statistics">Assessing Coverage and Design Statistics</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">Distance sampling survey design</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Centre for Research into Ecological and Environmental Modelling <br> <strong>University of St Andrews</strong> </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 26, 2022</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>We provide two exercises in survey design so you can choose the one you feel is most useful to you.</p>
<ul>
<li>The first example involves designing a line transect survey to estimate the abundance of porpoise, common dolphins and seals in and around St Andrews Bay.
<ul>
<li>It considers how you choose your design based on effort limitations.</li>
<li>It also compares an aerial survey based on systematic parallel lines with a boat based survey using zigzags.</li>
</ul></li>
<li>The <a href="#point-transect-bird-survey-in-tentsmuir-forest">second example</a> involves designing a point transect bird survey in Tentsmuir Forest.
<ul>
<li>This looks at how to project your study area from latitude and longitude on to a flat plane using R.</li>
<li>It also involves defining a design for multiple strata with different coverage in each strata.</li>
</ul></li>
</ul>
</section>
<section id="systematic-parallel-line-aerial-survey-of-marine-mammals-in-st-andrews-bay" class="level1">
<h1>Systematic parallel line aerial survey of marine mammals in St Andrews bay</h1>
<p><strong>The objective of this exercise is to decide on a systematic line spacing which uses as much of the 250 km of available effort as possible without risking not being able to complete the survey. We must remember that some of the 250 km will be spent travelling off-effort between transects.</strong></p>
<p>This project involves designing an aerial survey of porpoise, common dolphins and seals in and around St Andrews bay. (For locals: the nearer St Andrews bay region has been extended in an easterly direction out past Bell Rock, as there are some pockets of deeper water that are of interest with regard to the distribution of cetaceans. The survey region has a chunk missing due to a no-fly zone around Buddon Ness, just south of Carnoustie because of the Royal Marines base there).</p>
<p>This uses the package <code>leaflet</code> to give you a better image of the portion of the North Sea where the aerial survey for marine mammals was proposed, here is a quick figure, showing the Kingdom of Fife extending eastward from the coast of Scotland into the North Sea.</p>
<div class="cell">
<div class="cell-output-display">
<div id="htmlwidget-90d9a07c920180368609" style="width:100%;height:541px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-90d9a07c920180368609">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["Esri.OceanBasemap",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addPolygons","args":[[[[{"lng":[-2.81486519277554,-2.81674309839283,-2.81472301483154,-2.81472301483154,-2.81305503845215,-2.81305503845215,-2.81083297729492,-2.81083297729492,-2.81027889251703,-2.81027889251703,-2.8091669082641,-2.8091669082641,-2.80638790130604,-2.80638790130604,-2.80527806282038,-2.80527806282038,-2.80361008644104,-2.80361008644104,-2.80305600166309,-2.80305600166309,-2.79916596412647,-2.79916596412647,-2.79694390296936,-2.79694390296936,-2.79305505752563,-2.79305505752563,-2.79249906539917,-2.79249906539917,-2.79027700424194,-2.79027700424194,-2.78870034371198,-2.78135024864642,-2.71151894970134,-2.71247233406289,-2.71194505691528,-2.71194505691528,-2.71138906478882,-2.71138906478882,-2.71083307266235,-2.71083307266235,-2.71138906478882,-2.71138906478882,-2.71083307266235,-2.71083307266235,-2.71027708053589,-2.71027708053589,-2.70972299575806,-2.70972299575806,-2.70916700363159,-2.70916700363159,-2.70861101150513,-2.70861101150513,-2.70805501937866,-2.70805501937866,-2.7074990272522,-2.7074990272522,-2.70305490493769,-2.70305490493769,-2.70138788223267,-2.70138788223267,-2.69928503036499,-2.69805598258972,-2.69805598258972,-2.69638800621027,-2.69638800621027,-2.69527792930603,-2.69527792930603,-2.69472193717957,-2.69472193717957,-2.6941659450531,-2.6941659450531,-2.69361209869373,-2.69361209869373,-2.69361209869373,-2.69321298599243,-2.69305610656733,-2.69305610656733,-2.69361209869373,-2.69361209869373,-2.69305610656733,-2.69305610656733,-2.69083404541016,-2.69083404541016,-2.68805599212646,-2.68805599212646,-2.6863899230957,-2.6863899230957,-2.68583297729487,-2.68583297729487,-2.68472099304199,-2.68472099304199,-2.68361091613764,-2.68361091613764,-2.68249893188471,-2.68249893188471,-2.68138909339905,-2.68138909339905,-2.68083310127258,-2.68083310127258,-2.68027710914612,-2.68027710914612,-2.67972302436823,-2.67972302436823,-2.67805504798889,-2.67805504798889,-2.67638897895807,-2.67638897895807,-2.67583298683161,-2.67583298683161,-2.67472290992737,-2.67472290992737,-2.67360997200012,-2.67360997200012,-2.67249989509583,-2.67249989509583,-2.67194390296936,-2.67194390296936,-2.67083406448364,-2.67083406448364,-2.67027807235718,-2.67027807235718,-2.66972208023071,-2.66972208023071,-2.66916608810413,-2.66916608810413,-2.66805601119995,-2.66805601119995,-2.66750001907349,-2.66750001907349,-2.66694402694702,-2.66694402694702,-2.66638994216913,-2.66638994216913,-2.66583395004272,-2.66583395004272,-2.66527795791626,-2.66527795791626,-2.66583395004272,-2.66583395004272,-2.66638994216913,-2.66638994216913,-2.66694402694702,-2.66694402694702,-2.66638994216913,-2.66638994216913,-2.66583395004272,-2.66583395004272,-2.66527795791626,-2.66527795791626,-2.66305589675898,-2.66305589675898,-2.66083407402039,-2.66083407402039,-2.66027688980103,-2.66027688980103,-2.65972089767445,-2.65972089767445,-2.65916800498957,-2.65916800498957,-2.65861105918879,-2.65861105918879,-2.65694499015808,-2.65694499015808,-2.6563889980315,-2.6563889980315,-2.65527701377863,-2.65527701377863,-2.65472292900085,-2.65472292900085,-2.65416693687439,-2.65416693687439,-2.65361094474792,-2.65361094474792,-2.65250110626215,-2.65250110626215,-2.6513888835907,-2.6513888835907,-2.64861106872553,-2.64861106872553,-2.64694499969482,-2.64694499969482,-2.64583492279053,-2.64583206176758,-2.64527797698969,-2.64527797698969,-2.64416599273682,-2.64416599273682,-2.64361000061035,-2.64361000061035,-2.64305591583246,-2.64305591583246,-2.64170002937317,-2.64138793945307,-2.64138793945307,-2.64130592346191,-2.64083409309387,-2.64083409309387,-2.64027810096741,-2.64027810096741,-2.63972210884094,-2.63972210884094,-2.63861203193659,-2.63861203193659,-2.63750004768372,-2.63750004768372,-2.63694405555725,-2.63694405555725,-2.6358339786529,-2.6358339786529,-2.63527798652643,-2.63527798652643,-2.63472104072565,-2.63472104072565,-2.63416790962219,-2.63416790962219,-2.63361191749561,-2.63361191749561,-2.63416790962219,-2.63416790962219,-2.63472104072565,-2.63472104072565,-2.63527798652643,-2.63527798652643,-2.63472104072565,-2.63472104072565,-2.63416790962219,-2.63416790962219,-2.63361191749561,-2.63361191749561,-2.63305497169495,-2.63305497169495,-2.63249897956848,-2.63249897956848,-2.63194608688349,-2.63194608688349,-2.63138890266418,-2.63138890266418,-2.63083291053772,-2.63083291053772,-2.63027691841125,-2.63027691841125,-2.629723072052,-2.62972092628479,-2.62916707992554,-2.62916707992554,-2.62861108779896,-2.62861108779896,-2.62805509567255,-2.62805509567255,-2.62749910354609,-2.62749910354609,-2.62694501876831,-2.62694501876831,-2.62638902664185,-2.62638902664185,-2.62527704238892,-2.62527704238892,-2.62472295761108,-2.62472295761108,-2.62416696548462,-2.62416696548462,-2.62361097335815,-2.62361097335815,-2.62305498123169,-2.62305498123169,-2.6225008964538,-2.6225008964538,-2.62194490432734,-2.62194490432734,-2.62138891220093,-2.62138891220093,-2.62083196640009,-2.62083196640009,-2.62027907371521,-2.62027907371521,-2.61972308158875,-2.61972308158875,-2.61916589736927,-2.61916589736927,-2.61860990524286,-2.61860990524286,-2.61805605888361,-2.61805605888361,-2.61750006675715,-2.61750006675715,-2.61694407463068,-2.61694407463068,-2.61638808250427,-2.61638808250427,-2.61472201347345,-2.61472201347345,-2.61416602134699,-2.61416602134699,-2.61305594444275,-2.61305594444275,-2.61249995231617,-2.61249995231617,-2.61194396018976,-2.61194396018976,-2.6113879680633,-2.6113879680633,-2.61083388328552,-2.61083388328552,-2.61027789115906,-2.61027789115906,-2.60972189903259,-2.60972189903259,-2.60916590690613,-2.60916590690613,-2.60805606842035,-2.60805606842035,-2.60694599151611,-2.60694599151611,-2.60583305358887,-2.60583305358887,-2.60472106933594,-2.60472106933594,-2.60361099243164,-2.60361099243164,-2.60138893127436,-2.60138893127436,-2.59916710853577,-2.59916710853577,-2.59750103950495,-2.59750103950495,-2.59423899650574,-2.59194397926331,-2.59194397926331,-2.58805608749378,-2.58805608749378,-2.58750009536737,-2.58750009536737,-2.58694410324091,-2.58694410324091,-2.58638811111445,-2.58638811111445,-2.58583402633667,-2.58583402633667,-2.58527803421021,-2.58527803421021,-2.58527803421021,-2.58583402633667,-2.58583402633667,-2.58416604995716,-2.58416604995716,-2.58249998092651,-2.58249998092651,-2.58194398880005,-2.58194398880005,-2.58138990402216,-2.58138990402216,-2.58083391189575,-2.58083391189575,-2.57972097396845,-2.57972097396845,-2.57749891281122,-2.57749891281122,-2.57694506645197,-2.57694506645197,-2.57361102104181,-2.57361102104181,-2.57305502891535,-2.57305502891535,-2.57250094413757,-2.57250094413757,-2.57194495201099,-2.57194495201099,-2.57138895988459,-2.57138895988459,-2.57083296775812,-2.57083296775812,-2.56972289085388,-2.56972289085388,-2.56916689872742,-2.56916689872742,-2.56861090660095,-2.56861090660095,-2.56583189964294,-2.56583189964294,-2.56472206115723,-2.56472206115723,-2.56116509437555,-2.56083202362061,-2.56083202362061,-2.56027793884272,-2.56027793884272,-2.55805611610413,-2.55805611610413,-2.5558340549469,-2.5558340549469,-2.55472207069397,-2.55472207069397,-2.55305600166321,-2.55305600166321,-2.55194592475885,-2.55194592475885,-2.55138897895813,-2.55138897895813,-2.55027699470514,-2.55027699470514,-2.5491669178009,-2.5491669178009,-2.54861092567444,-2.54861092567444,-2.54805493354797,-2.54805493354797,-2.5469450950622,-2.5469450950622,-2.54638910293573,-2.54638910293573,-2.54583311080927,-2.54583311080927,-2.54527902603149,-2.54527902603149,-2.54472303390503,-2.54472303390503,-2.54416704177856,-2.54416704177856,-2.54361104965199,-2.54361104965199,-2.54305505752558,-2.54305505752558,-2.5425009727478,-2.5425009727478,-2.54194498062134,-2.54194498062134,-2.54083299636841,-2.54083299636841,-2.54027891159058,-2.54027891159058,-2.53972291946411,-2.53972291946411,-2.53916597366327,-2.53916597366327,-2.53860998153687,-2.53860998153687,-2.53805708885193,-2.53805708885193,-2.53749990463251,-2.53749990463251,-2.53694391250605,-2.53694391250605,-2.53749990463251,-2.53749990463251,-2.53805708885193,-2.53805708885193,-2.53749990463251,-2.53749990463251,-2.53694391250605,-2.53694391250605,-2.53583407402033,-2.53583407402033,-2.53638792037958,-2.53638792037958,-2.53694391250605,-2.53694391250605,-2.53805708885193,-2.53805708885193,-2.53860998153687,-2.53860998153687,-2.53860998153687,-2.53805708885193,-2.53805708885193,-2.53749990463251,-2.53749990463251,-2.53694391250605,-2.53694391250605,-2.53638792037958,-2.53638792037958,-2.53694391250605,-2.53694391250605,-2.53638792037958,-2.53638792037958,-2.53527808189392,-2.53527808189392,-2.53416609764099,-2.53416609764099,-2.53361010551453,-2.53361010551453,-2.53305602073664,-2.53305602073664,-2.53250002861017,-2.53250002861017,-2.38525796282678,-2.38640273821933,-2.65527701377863,-2.65527701377863,-2.65583300590509,-2.65583300590509,-2.6563889980315,-2.6563889980315,-2.65694499015808,-2.65694499015808,-2.65749907493586,-2.65749907493586,-2.65805506706232,-2.65805506706232,-2.65861105918879,-2.65861105918879,-2.65972089767445,-2.65972089767445,-2.66194295883173,-2.66194295883173,-2.66416597366333,-2.66416597366333,-2.66472196578979,-2.66472196578979,-2.66583395004272,-2.66583395004272,-2.66638803482056,-2.66638994216913,-2.66694402694702,-2.66694402694702,-2.66805601119995,-2.66805601119995,-2.66861009597773,-2.66861009597773,-2.66916608810413,-2.66916608810413,-2.67027807235718,-2.67027807235718,-2.67083406448364,-2.67083406448364,-2.67194390296936,-2.67194390296936,-2.67249989509583,-2.67249989509583,-2.67360997200012,-2.67360997200012,-2.67416596412659,-2.67416596412659,-2.67527890205383,-2.67527890205383,-2.67638897895807,-2.67638897895807,-2.67694497108454,-2.67694497108454,-2.67750096321095,-2.67750096321095,-2.6786110401153,-2.6786110401153,-2.67972302436823,-2.67972302436823,-2.68027710914612,-2.68027710914612,-2.68027710914612,-2.68083310127258,-2.68083310127258,-2.68138909339905,-2.68138909339905,-2.68194508552551,-2.68194508552551,-2.68249893188471,-2.68249893188471,-2.68305492401117,-2.68305492401117,-2.6841669082641,-2.6841669082641,-2.68583297729487,-2.68583297729487,-2.68694305419922,-2.68694305419922,-2.68749904632568,-2.68749904632568,-2.68805599212646,-2.68805599212646,-2.68861198425293,-2.68861198425293,-2.69083404541016,-2.69083404541016,-2.69305610656733,-2.69305610656733,-2.69361209869373,-2.69361209869373,-2.6941659450531,-2.6941659450531,-2.69472193717957,-2.69472193717957,-2.69527792930603,-2.69527792930603,-2.69694399833668,-2.69694399833668,-2.69916605949396,-2.69916605949396,-2.7008318901062,-2.7008318901062,-2.70416688919062,-2.70416688919062,-2.70527696609497,-2.70527911186218,-2.70583295822144,-2.70583295822144,-2.7063889503479,-2.7063889503479,-2.70694494247431,-2.70694494247431,-2.7074990272522,-2.7074990272522,-2.70805501937866,-2.70805501937866,-2.70861101150513,-2.70861101150513,-2.70916700363159,-2.70916700363159,-2.71138906478882,-2.71138906478882,-2.71194505691528,-2.71194505691528,-2.713054895401,-2.713054895401,-2.71472096443176,-2.71472096443176,-2.71527791023254,-2.71527791023254,-2.71638989448547,-2.71638989448547,-2.71694397926325,-2.71694397926325,-2.71805596351612,-2.71805596351612,-2.7186119556427,-2.7186119556427,-2.71916604042048,-2.71916604042048,-2.72083401679987,-2.72083401679987,-2.72250008583069,-2.72250008583069,-2.72527790069569,-2.72527790069569,-2.72805404663086,-2.72805404663086,-2.72916698455811,-2.72916698455811,-2.73083305358875,-2.73083305358875,-2.7319450378418,-2.7319450378418,-2.73593306541443,-2.73805499076843,-2.73805499076843,-2.7386109828949,-2.7386109828949,-2.73972105979914,-2.73972105979914,-2.7402770519256,-2.7402770519256,-2.74138998985285,-2.74138998985285,-2.7425000667572,-2.7425000667572,-2.74305605888367,-2.74305605888367,-2.74472188949579,-2.74472188949579,-2.74527788162226,-2.74527788162226,-2.74583411216736,-2.74583411216736,-2.74583411216736,-2.74639010429382,-2.74639010429382,-2.74694395065308,-2.74694395065308,-2.74805593490595,-2.74805593490595,-2.75083398818964,-2.75083398818964,-2.75138807296753,-2.75138807296753,-2.75527906417835,-2.75527906417835,-2.75694489479065,-2.75694489479065,-2.75916695594788,-2.75916695594788,-2.75972294807434,-2.75972294807434,-2.76027703285212,-2.76027703285212,-2.76083302497858,-2.76083302497858,-2.7624990940094,-2.7624990940094,-2.76305508613586,-2.76305508613586,-2.76472091674799,-2.7647230625152,-2.76583290100086,-2.76583290100086,-2.76861190795893,-2.76861190795893,-2.76972198486328,-2.76972198486328,-2.77250003814697,-2.77250003814697,-2.77250003814697,-2.77416610717768,-2.77416610717768,-2.77638792991638,-2.77638792991638,-2.780277967453,-2.780277967453,-2.78083205223078,-2.78083491325378,-2.78138804435724,-2.78138804435724,-2.78194499015802,-2.78194499015802,-2.78250098228449,-2.78250098228449,-2.783054113388,-2.783054113388,-2.783054113388,-2.78361105918884,-2.78361105918884,-2.783054113388,-2.783054113388,-2.78361105918884,-2.78361105918884,-2.78416705131531,-2.78416705131531,-2.78472304344172,-2.78472304344172,-2.78527903556818,-2.78527903556818,-2.78583288192743,-2.78583288192743,-2.78638911247253,-2.78638911247253,-2.786945104599,-2.786945104599,-2.78749895095825,-2.78750109672546,-2.78805494308466,-2.78805494308466,-2.78861093521112,-2.78861093521112,-2.78916692733759,-2.78916692733759,-2.78972291946405,-2.78972291946405,-2.79249906539917,-2.79249906539917,-2.79416799545288,-2.79416799545288,-2.7967462316436,-2.79749989509583,-2.79749989509583,-2.79787477971326,-2.80527806282038,-2.80527806282038,-2.80583405494684,-2.80583405494684,-2.80638790130604,-2.80638790130604,-2.80694389343262,-2.80694389343262,-2.80749988555908,-2.80749988555908,-2.80805706977844,-2.80805706977844,-2.80860996246332,-2.80860996246332,-2.8091669082641,-2.8091669082641,-2.80972290039057,-2.80972290039057,-2.81027889251703,-2.81027889251703,-2.81083297729492,-2.81083297729492,-2.81083297729492,-2.81091189384449,-2.81138896942139,-2.81138896942139,-2.81138896942139,-2.81194496154785,-2.81194496154785,-2.81250095367426,-2.81250095367426,-2.81305503845215,-2.81305503845215,-2.81361103057861,-2.81361103057861,-2.81416702270508,-2.81416702270508,-2.81472301483154,-2.81472301483154,-2.81527709960926,-2.81527709960926,-2.81583309173584,-2.81583309173584,-2.8163890838623,-2.8163890838623,-2.81648787325332,-2.81591007377416,-2.81527709960926,-2.81527709960926,-2.81416702270508,-2.81416702270508,-2.81305503845215,-2.81305503845215,-2.81250095367426,-2.81250095367426,-2.81194496154785,-2.81194496154785,-2.81138896942139,-2.81138896942139,-2.81083297729492,-2.81083297729492,-2.81027889251703,-2.81027889251703,-2.80972290039057,-2.80972290039057,-2.8091669082641,-2.8091669082641,-2.80860996246332,-2.80860996246332,-2.80805706977844,-2.80805706977844,-2.80749988555908,-2.80749988555908,-2.80860996246332,-2.80860996246332,-2.80805706977844,-2.80805706977844,-2.80749988555908,-2.80749988555908,-2.80694389343262,-2.80694389343262,-2.80638790130604,-2.80638790130604,-2.80583405494684,-2.80583405494684,-2.80638790130604,-2.80638790130604,-2.80583405494684,-2.80583405494684,-2.80638790130604,-2.80638790130604,-2.80694389343262,-2.80694389343262,-2.80638790130604,-2.80638790130604,-2.80694389343262,-2.80694389343262,-2.80638790130604,-2.80638790130604,-2.80583405494684,-2.80583405494684,-2.80527806282038,-2.80527806282038,-2.80583405494684,-2.80583405494684,-2.80638790130604,-2.80638790130604,-2.80583405494684,-2.80583405494684,-2.80472207069391,-2.80472207069391,-2.80416607856745,-2.80416607856745,-2.80416607856745,-2.80361008644104,-2.80361008644104,-2.80305600166309,-2.80305600166309,-2.80361008644104,-2.80361008644104,-2.80305600166309,-2.80305600166309,-2.80416607856745,-2.80416607856745,-2.80472207069391,-2.80472207069391,-2.80583405494684,-2.80583405494684,-2.80638790130604,-2.80638790130604,-2.80694389343262,-2.80694389343262,-2.80860996246332,-2.80860996246332,-2.8091669082641,-2.8091669082641,-2.80972290039057,-2.80972290039057,-2.8091669082641,-2.8091669082641,-2.80805706977844,-2.80805397033686,-2.80749988555908,-2.80749988555908,-2.8091669082641,-2.8091669082641,-2.81027889251703,-2.81027889251703,-2.81138896942139,-2.81138896942139,-2.81083297729492,-2.81083297729492,-2.8091669082641,-2.8091669082641,-2.81027889251703,-2.81027889251703,-2.81083297729492,-2.81083297729492,-2.81250095367426,-2.81250095367426,-2.81472301483154,-2.81472301483154,-2.81486519277554],"lat":[56.4445838928223,56.4779167175292,56.4779167175292,56.4781951904296,56.4781951904296,56.47847366333,56.47847366333,56.4787483215334,56.4787483215334,56.4790267944336,56.4790267944336,56.479305267334,56.479305267334,56.4795837402344,56.4795837402344,56.479305267334,56.479305267334,56.4795837402344,56.4795837402344,56.4798622131349,56.4798622131349,56.4795837402344,56.4795837402344,56.479305267334,56.479305267334,56.4790267944336,56.4790267944336,56.4787483215334,56.4787483215334,56.47847366333,56.47847366333,56.4584279495149,56.4572831741223,56.4954185485841,56.4954185485841,56.4962501525879,56.4962501525879,56.4965286254883,56.4965286254883,56.4968070983887,56.4968070983887,56.497081756592,56.497081756592,56.4973602294924,56.4973602294924,56.4976387023928,56.4976387023928,56.4979171752932,56.4979171752932,56.4981956481934,56.4981956481934,56.4984741210938,56.4984741210938,56.498748779297,56.498748779297,56.4990272521974,56.4990272521974,56.4993057250977,56.4993057250977,56.4990272521974,56.4990272521974,56.4990272521974,56.4993057250977,56.4993057250977,56.4995841979981,56.4995841979981,56.4998626708985,56.4998626708985,56.5001373291015,56.5001373291015,56.5004158020019,56.5004158020019,56.5008430480959,56.5009727478028,56.5010070800782,56.5010223388672,56.5018043518066,56.5018043518066,56.5029182434082,56.5029182434082,56.5031929016116,56.5031929016116,56.5034713745119,56.5034713745119,56.5037498474123,56.5037498474123,56.5040283203127,56.5040283203127,56.5043067932131,56.5043067932131,56.5045814514163,56.5045852661133,56.5048599243165,56.5048599243165,56.5051383972169,56.5051383972169,56.5054168701173,56.5054168701173,56.5056953430176,56.5056953430176,56.5062484741211,56.5062484741211,56.5068054199218,56.5068054199218,56.5070838928222,56.5070838928222,56.5073623657228,56.5073623657228,56.5076370239258,56.5076370239258,56.5079154968262,56.5079154968262,56.5081939697266,56.5081939697266,56.5084724426271,56.5084724426271,56.5087509155275,56.5087509155275,56.5095825195315,56.5095825195315,56.5098609924319,56.5098609924319,56.5104179382326,56.5104179382326,56.5106925964358,56.5106925964358,56.5109710693362,56.5109710693362,56.5115280151368,56.5115280151368,56.5120849609376,56.5120849609376,56.512638092041,56.512638092041,56.5129165649413,56.5129165649413,56.5140266418457,56.5140266418457,56.5143051147461,56.5143051147461,56.514862060547,56.514862060547,56.5154151916504,56.5154151916504,56.5159721374514,56.5159721374514,56.5162506103518,56.5162506103518,56.5165290832522,56.5165290832522,56.5162506103518,56.5162506103518,56.5165290832522,56.5165290832522,56.5168037414552,56.5168037414552,56.5170822143558,56.5170822143558,56.5179176330568,56.5179176330568,56.5181961059571,56.5181961059571,56.5184707641602,56.5184707641602,56.5187492370605,56.5187492370605,56.5190277099609,56.5190277099609,56.5198593139651,56.5198593139651,56.5204162597656,56.5204162597656,56.520694732666,56.520694732666,56.5209732055664,56.5209732055664,56.521251678467,56.521251678467,56.52152633667,56.52152633667,56.5218048095704,56.5218048095704,56.5220832824708,56.5220832824708,56.5223617553713,56.5223617553713,56.5229148864746,56.5229148864746,56.5231933593751,56.5231933593751,56.5234718322757,56.5234718322757,56.5234718322757,56.5237503051761,56.5237503051761,56.5237503051761,56.5240287780763,56.5240287780763,56.5243072509767,56.5243072509767,56.5245819091799,56.5245819091799,56.5248603820801,56.5248603820801,56.5251388549805,56.5251388549805,56.5254173278809,56.5254173278809,56.5256958007812,56.5256958007812,56.5259704589846,56.5259704589846,56.526248931885,56.526248931885,56.5268058776855,56.5268058776855,56.5276374816896,56.5276374816896,56.5281944274903,56.5281944274903,56.5284729003907,56.5284729003907,56.529582977295,56.529582977295,56.530139923096,56.530139923096,56.5304183959962,56.5304183959962,56.5306930541994,56.5306930541994,56.5309715270998,56.5309715270998,56.5315284729004,56.5315284729004,56.5320816040041,56.5320816040041,56.5329170227053,56.5329170227053,56.5331954956055,56.5331954956055,56.5337486267091,56.5337486267091,56.5340270996095,56.5340270996095,56.5348625183106,56.5348625183106,56.535415649414,56.535415649414,56.5356941223144,56.5356941223144,56.5365295410159,56.5365295410159,56.5370826721193,56.5370826721193,56.5373611450197,56.5373611450197,56.5376396179199,56.5376396179199,56.5379180908203,56.5379180908203,56.5384712219241,56.5384712219241,56.5393066406252,56.5393066406252,56.5395851135254,56.5395851135254,56.5398597717286,56.5398597717286,56.5404167175294,56.5404167175294,56.5406951904297,56.5406951904297,56.5409736633301,56.5409736633301,56.5415267944335,56.5415267944335,56.5418052673339,56.5418052673339,56.5420837402343,56.5420837402343,56.5423622131349,56.5423622131349,56.5426406860354,56.5426406860354,56.5434722900392,56.5434722900392,56.5437507629396,56.5437507629396,56.5440292358398,56.5440292358398,56.5454177856448,56.5454177856448,56.5459709167483,56.5459709167483,56.5462493896486,56.5462493896486,56.5468063354493,56.5468063354493,56.5470848083497,56.5470848083497,56.5476379394531,56.5476379394531,56.5479164123535,56.5479164123535,56.5487518310548,56.5487518310548,56.5490264892578,56.5490264892578,56.5493049621582,56.5493049621582,56.5495834350586,56.5495834350586,56.5498619079592,56.5498619079592,56.5501403808595,56.5501403808595,56.5504150390626,56.5504150390626,56.5506935119629,56.5506935119629,56.5509719848635,56.5509719848635,56.5506935119629,56.5506935119629,56.5504150390626,56.5504150390626,56.5504150390626,56.5506935119629,56.5506935119629,56.5509719848635,56.5509719848635,56.5512504577639,56.5512504577639,56.5515289306643,56.5515289306643,56.5518074035647,56.5518074035647,56.5520820617679,56.5520820617679,56.5527114868165,56.5534706115723,56.5534706115723,56.554027557373,56.554027557373,56.5537490844727,56.5537490844727,56.554027557373,56.554027557373,56.5543060302734,56.5543060302734,56.5545845031738,56.5545845031738,56.5548629760742,56.5548629760742,56.5551376342776,56.5551376342776,56.5554161071777,56.5554161071777,56.5556945800781,56.5556983947757,56.5565261840821,56.5565261840821,56.5568046569825,56.5568046569825,56.5573616027834,56.5573616027834,56.5576400756838,56.5576400756838,56.5581932067872,56.5581932067872,56.5584716796878,56.5584716796878,56.5587501525882,56.5587501525882,56.5590286254884,56.5590286254884,56.5593070983888,56.5593070983888,56.559581756592,56.559581756592,56.5598602294922,56.5598602294922,56.5598602294922,56.559581756592,56.559581756592,56.5593070983888,56.5593070983888,56.5590286254884,56.5590286254884,56.5593070983888,56.5593070983888,56.559581756592,56.559581756592,56.5598602294922,56.5598602294922,56.5601387023926,56.5601387023926,56.560417175293,56.560417175293,56.5606956481933,56.5606956481933,56.5609741210937,56.5609741210937,56.5612487792971,56.5612487792971,56.5615272521975,56.5615272521975,56.5618057250977,56.5618057250977,56.5623626708984,56.5623626708984,56.5626373291017,56.5626373291017,56.562915802002,56.562915802002,56.5631942749024,56.5631942749024,56.5634727478028,56.5634727478028,56.5637512207034,56.5637512207034,56.5640258789062,56.5640296936037,56.5643043518066,56.5643043518066,56.5645828247071,56.5645828247071,56.5648612976077,56.5648612976077,56.5651397705081,56.5651397705081,56.5654182434083,56.5654182434083,56.5656929016115,56.5656929016115,56.5659713745119,56.5659713745119,56.5662498474121,56.5662498474121,56.5668067932129,56.5668067932129,56.5681953430176,56.5681953430176,56.5687484741212,56.5687484741212,56.5695838928223,56.5695838928223,56.5698623657227,56.5698623657227,56.5701370239257,56.5701370239257,56.5712509155276,56.5712509155276,56.571529388428,56.571529388428,56.5718040466309,56.5718040466309,56.5720825195314,56.5720825195314,56.5723190307619,56.5729179382324,56.5729179382324,56.5731925964358,56.5731925964358,56.5734710693362,56.5734710693362,56.5737495422366,56.5737495422366,56.5745849609375,56.5745849609375,56.5748596191407,56.5748596191407,56.5751380920411,56.5751380920411,56.5754165649415,56.5754165649415,56.5756950378419,56.5756950378419,56.577362060547,56.577362060547,56.5776405334475,56.5776405334475,56.5777130021165,56.5740502641616,56.300448945344,56.3139489089704,56.3162498474123,56.3162498474123,56.3176383972169,56.3176383972169,56.3179168701172,56.3179168701172,56.3181953430176,56.3181953430176,56.318748474121,56.318748474121,56.3190269470214,56.3190269470214,56.3193054199218,56.3193054199218,56.3195838928224,56.3195838928224,56.3198623657229,56.3198623657229,56.3201370239258,56.3201370239258,56.3204154968262,56.3204154968262,56.3201370239258,56.3201370239258,56.3198623657229,56.3198623657229,56.3204154968262,56.3204154968262,56.3201370239258,56.3201370239258,56.3204154968262,56.3204154968262,56.3206939697267,56.3206939697267,56.3212509155273,56.3212509155273,56.3215293884277,56.3215293884277,56.3212509155273,56.3212509155273,56.3209724426271,56.3209724426271,56.3206939697267,56.3206939697267,56.3204154968262,56.3204154968262,56.3201370239258,56.3201370239258,56.3204154968262,56.3204154968262,56.3218040466311,56.3218040466311,56.3220825195315,56.3220825195315,56.3223609924319,56.3223609924319,56.3231925964358,56.3231925964358,56.3233871459961,56.3234710693361,56.3234710693361,56.3237495422364,56.3237495422364,56.3240280151368,56.3240280151368,56.3243064880372,56.3243064880372,56.3254165649413,56.3254165649413,56.3256950378417,56.3256950378417,56.3259735107423,56.3259735107423,56.3262481689453,56.3262481689453,56.3265266418457,56.3265266418457,56.3268051147461,56.3268051147461,56.3265266418457,56.3265266418457,56.3268051147461,56.3268051147461,56.3270835876467,56.3270835876467,56.3268051147461,56.3268051147461,56.3265266418457,56.3265266418457,56.3262481689453,56.3262481689453,56.3259735107423,56.3259735107423,56.3256950378417,56.3256950378417,56.3259735107423,56.3259735107423,56.3256950378417,56.3256950378417,56.3254165649413,56.3254165649413,56.325138092041,56.325138092041,56.3254165649413,56.3254165649413,56.3256950378417,56.3256950378417,56.3259735107423,56.3259735107423,56.3262481689453,56.3262481689453,56.3268051147461,56.3268051147461,56.327362060547,56.327362060547,56.3276405334473,56.3276405334473,56.3279151916504,56.3279151916504,56.328193664551,56.328193664551,56.3284721374514,56.3284721374514,56.3287506103518,56.3287506103518,56.3284721374514,56.3284721374514,56.328193664551,56.328193664551,56.3279151916504,56.3279151916504,56.3276405334473,56.3276405334473,56.327362060547,56.327362060547,56.3270835876467,56.3270835876467,56.3268051147461,56.3268051147461,56.3270835876467,56.3270835876467,56.327362060547,56.327362060547,56.3270835876467,56.3270835876467,56.327362060547,56.327362060547,56.3276405334473,56.3276405334473,56.3279151916504,56.3279151916504,56.328193664551,56.328193664551,56.328193664551,56.3284721374514,56.3284721374514,56.3287506103518,56.3287506103518,56.3290290832522,56.3290290832522,56.3293037414554,56.3293037414554,56.3295822143558,56.3295822143558,56.329860687256,56.329860687256,56.3301391601564,56.3301391601564,56.3304176330568,56.3304176330568,56.3306961059571,56.3306961059571,56.331108093262,56.3315277099609,56.3315277099609,56.3320846557617,56.3320846557617,56.3323593139651,56.3323593139651,56.3326377868652,56.3326377868652,56.3323593139651,56.3323593139651,56.3320846557617,56.3320846557617,56.3323593139651,56.3323593139651,56.3326377868652,56.3326377868652,56.3329162597656,56.3329162597656,56.3326377868652,56.3326377868652,56.3323593139651,56.3323593139651,56.3320846557617,56.3320846557617,56.3323593139651,56.3323593139651,56.3326377868652,56.3326377868652,56.3329162597656,56.3329162597656,56.333194732666,56.333194732666,56.3334732055666,56.3334732055666,56.333751678467,56.333751678467,56.3336677551271,56.3334732055666,56.3334732055666,56.333194732666,56.333194732666,56.3331461001002,56.3350658588845,56.3356933593753,56.3356933593753,56.3359718322757,56.3359718322757,56.3362503051759,56.3362503051759,56.3368072509767,56.3368072509767,56.3370819091797,56.3370819091797,56.3377227783205,56.3379173278808,56.3379325866699,56.338748931885,56.338748931885,56.3395843505859,56.3395843505859,56.3404159545899,56.3404159545899,56.3406944274903,56.3406944274903,56.3412513732912,56.3412513732912,56.3415260314941,56.3415260314941,56.3418045043946,56.3418045043946,56.3420829772952,56.3420829772952,56.3423614501956,56.3423614501956,56.3426399230958,56.3426399230958,56.3429183959962,56.3429183959962,56.3431930541994,56.3431930541994,56.34375,56.34375,56.3440284729004,56.3440284729004,56.34375,56.34375,56.3431930541994,56.3431930541994,56.343564992007,56.34375,56.34375,56.3474035682866,56.347915649414,56.347915649414,56.3493041992189,56.3493041992189,56.3504180908203,56.3504180908203,56.3520851135254,56.3520851135254,56.3529167175294,56.3529167175294,56.3537483215331,56.3537483215331,56.3551406860354,56.3551406860354,56.3562507629395,56.3562507629395,56.3568038940432,56.3568038940432,56.3579177856448,56.3579177856448,56.3591918945312,56.3593063354493,56.3593063354493,56.3593063354493,56.3599891662599,56.361251831055,56.361251831055,56.3618049621582,56.3618049621582,56.3623619079592,56.3623809814454,56.3634719848635,56.3634719848635,56.3640289306643,56.3640289306643,56.3643074035647,56.3643074035647,56.3645820617679,56.3645820617679,56.3651390075685,56.3651390075685,56.3659706115723,56.3659706115723,56.3662490844727,56.3662490844727,56.3879165649415,56.3879165649415,56.3881950378419,56.3881950378419,56.3884735107422,56.3884735107422,56.3887481689453,56.3887481689453,56.390693664551,56.390693664551,56.3923606872561,56.3923606872561,56.3943061828614,56.3943061828614,56.3954162597656,56.3954162597656,56.3981933593752,56.3981933593752,56.4009704589844,56.4009704589844,56.4034729003908,56.4034729003908,56.4045829772951,56.4045829772951,56.4054183959963,56.4054183959963,56.4056930541995,56.4056930541995,56.4062500000001,56.4062500000001,56.4068069458009,56.4068069458009,56.407917022705,56.407917022705,56.4098625183107,56.4098625183107,56.4118041992189,56.4118041992189,56.4131927490236,56.4131927490236,56.4156951904297,56.4156951904297,56.4159736633301,56.4159736633301,56.4179153442382,56.4179153442382,56.4181938171388,56.4181938171388,56.4184722900393,56.4184722900393,56.4201393127441,56.4201393127441,56.4206962585449,56.4206962585449,56.4215278625491,56.4215278625491,56.4229164123536,56.4229164123536,56.4234733581544,56.4234733581544,56.4270820617678,56.4270820617678,56.4276390075686,56.4276390075686,56.4323616027834,56.4323616027834,56.4327774047854,56.4340286254885,56.4340286254885,56.4351387023927,56.4351387023927,56.4395828247073,56.4395828247073,56.4415283203126,56.4415283203126,56.4423599243164,56.4423599243164,56.4426383972168,56.4426383972168,56.4429168701171,56.4429168701171,56.4431953430175,56.4431953430175,56.4437484741213,56.4437484741213,56.4440269470215,56.4440269470215,56.4437484741213,56.4437484741213,56.4434738159179,56.4434738159179,56.4423599243164,56.4423599243164,56.4420852661133,56.442081451416,56.441806793213,56.441806793213,56.4412498474122,56.4412498474122,56.4415283203126,56.4415283203126,56.441806793213,56.441806793213,56.4431953430175,56.4431953430175,56.4443054199219,56.4443054199219,56.4448623657228,56.4448623657228,56.4451370239258,56.4451370239258,56.4454154968262,56.4454154968262,56.4456939697266,56.4456939697266,56.4445838928223,56.4445838928223]}]]],null,null,{"interactive":true,"className":"","stroke":true,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":"#03F","fillOpacity":0.2,"smoothFactor":1,"noClip":false},null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addMarkers","args":[[56.3398,56.4661,56.2697],[-2.7967,-2.7375,-2.6036],null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,["St Andrews","Buddon Ness","Fife Ness airstrip"],{"interactive":false,"permanent":true,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":true,"className":"","sticky":true},null]}],"setView":[[56.41,-2.5],10,[]],"limits":{"lat":[56.2697,56.5777130021165],"lng":[-2.81674309839283,-2.38525796282678]}},"evals":[],"jsHooks":[]}</script>
<p>St Andrews Bay lies northeast of StAndrews.</p>
</div>
</div>
<p>Before we begin we must load the distance sampling survey design R library.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dssd)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="study-region" class="level2">
<h2 class="anchored" data-anchor-id="study-region">Study Region</h2>
<p>First of all we will set up the study region and plot it. The shapefile for this study area is contained within the <code>dssd</code> R library. This shapefile has already been projected from latitude and longitude on to a flat plane and its units are in metres. The first line of code below returns the path for the shapefile within the R library and may vary on different computers. You will then pass this shapefile pathway to the <em>make.region</em> function to set up the survey region. As this shapefile does not have a projection (.prj) file associated with it we should tell <code>dssd</code> the units (m) when we create the survey region.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Find the pathway to the file</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>shapefile.name <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">"extdata"</span>, <span class="st">"StAndrew.shp"</span>, <span class="at">package =</span> <span class="st">"dssd"</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Create the region using this shapefile</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>region <span class="ot">&lt;-</span> <span class="fu">make.region</span>(<span class="at">region.name =</span> <span class="st">"St Andrews Bay"</span>,</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>                      <span class="at">units =</span> <span class="st">"m"</span>,</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>                      <span class="at">shape =</span> shapefile.name)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co">#Plot the region</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(region)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Pr6-instructions_files/figure-html/region-1.png" class="img-fluid figure-img" width="384"></p>
<p></p><figcaption class="figure-caption">Study Region</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
<section id="coverage" class="level2">
<h2 class="anchored" data-anchor-id="coverage">Coverage</h2>
<p>The next step is to set up a coverage grid. A coverage grid is a grid of regularly spaced points and is used to assess whether each point in the survey region is equally likely to sampled. The coverage grid needs to be created before the coverage simulation is run.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set up coverage grid</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>cover <span class="ot">&lt;-</span> <span class="fu">make.coverage</span>(region, <span class="at">n.grid.points =</span> <span class="dv">500</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="systematic-parallel-design" class="level2">
<h2 class="anchored" data-anchor-id="systematic-parallel-design">Systematic Parallel Design</h2>
<p>The small survey plane available can complete a total flight time of around 250 km (excluding the flight time to and from the landing strip at Fife Ness). Generally, systematic parallel line designs are preferable for aerial surveys as they allow some rest time for observers as the plane travels between transects and avoids the sharp turns associated with zigzag designs.</p>
<p>Firstly, we will consider the design angle. Often animal density is affected by distance to coast so it is probably wise for this survey to orientate lines approximately perpendicular to the coast. To do this we can select a design angle of 90 degrees. We can therefore expect to spend a little more than 40 km (the height of the survey region) on off-effort transit time and might hope to be able to complete around 200 km of transects. <code>dssd</code> lets us specify the desired line length as a design parameter and will then choose an appropriate value for transect spacing. We will choose a minus sampling strategy and set the truncation distance to 2 km. Note that as our survey region coordinates are in metres we also need to supply the design parameters in metres.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the design</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>design.LL200 <span class="ot">&lt;-</span> <span class="fu">make.design</span>(<span class="at">region =</span> region,</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>                      <span class="at">transect.type =</span> <span class="st">"line"</span>,</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>                      <span class="at">design =</span> <span class="st">"systematic"</span>,</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>                      <span class="at">line.length =</span> <span class="dv">200000</span>,</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>                      <span class="at">design.angle =</span> <span class="dv">90</span>,</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>                      <span class="at">edge.protocol =</span> <span class="st">"minus"</span>,</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>                      <span class="at">truncation =</span> <span class="dv">2000</span>,</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>                      <span class="at">coverage.grid =</span> cover)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now we have defined the design we should check it visually by creating a survey (a single set of transects).</p>
<div class="cell">

</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a single survey from the design</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>survey.LL200 <span class="ot">&lt;-</span> <span class="fu">generate.transects</span>(design.LL200)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the region and the survey</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(region, survey.LL200)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Pr6-instructions_files/figure-html/survey-1.png" class="img-fluid figure-img" width="384"></p>
<p></p><figcaption class="figure-caption">Single survey generated from the systematicparallel line design</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>We can see that the survey consists of parallel systematically spaced transects running horizontally across the survey region roughly perpendicular to the coast as we wanted. We can also view the details of the survey which will tell us what spacing <code>dssd</code> used to try and achieve a line length of 200 km.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the survey details</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>survey.LL200</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
   Strata St Andrews Bay:
   _______________________
Design:  systematically spaced parallel transects
Spacing:  4937.5
Line length: 199960.8
Trackline length: 248012.3
Cyclic trackline length: 284758.4
Number of samplers:  8
Design angle:  90
Edge protocol:  minus
Covered area:  779476845
Strata coverage: 78.93%
Strata area:  987500079

   Study Area Totals:
   _________________
Line length: 199960.8
Trackline length: 248012.3
Cyclic trackline length: 284758.4
Number of samplers:  8
Covered area:  779476845
Average coverage: 78.93%</code></pre>
</div>
</div>
<p>We can see that the spacing used by <code>dssd</code> was 4937.5 m which gives us 8 samplers and a coverage of just under 80%. In addition, this example survey has a line length of just under 200 km and a trackline length of just over 248 km. However, given the random nature of the design and the fact that the width of the study region is not constant everybody should get slightly different values. Although my trackline length was just under 250 km it is not sufficient to only look at one survey, we need to know that all surveys under this design will have a trackline length of &lt; 250 km.</p>
<p>To assess the design statistics across many surveys we will now run a coverage simulation. This simulation will randomly generate many surveys from our design and record coverage as well as various statistics including line length and trackline length. As we know that coverage for a parallel line design is largely uniform (apart from edge effects due to minus sampling) we do not need to run too many repetitions, 100 should be sufficient to give us an indication of the range of line lengths and trackline lengths for this design.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Run the coverage simulation</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>design.LL200 <span class="ot">&lt;-</span> <span class="fu">run.coverage</span>(design.LL200, <span class="at">reps =</span> <span class="dv">100</span>)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>design.LL200</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>After you have run the coverage simulation take a look at the design statistics. The mean line length should be around 200 km (200,000 m). Now look at the maximum trackline length, we need this value to be less than 250 km (250,000 m).</p>
<p>Use the results of this simulation to create some new designs based on various spacings to find the maximum line length that can be achieved without risking exceeding the maximum trackline length of 250 km (remember to generate a line length of 200 km <code>dssd</code> selected a spacing of 4938m). Maybe try spacings of 5000 m or 5500 m.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the design</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>design.space500 <span class="ot">&lt;-</span> <span class="fu">make.design</span>(<span class="at">region =</span> region,</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>                      <span class="at">transect.type =</span> <span class="st">"line"</span>,</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>                      <span class="at">design =</span> <span class="st">"systematic"</span>,</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>                      <span class="at">spacing =</span> <span class="dv">5000</span>,</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>                      <span class="at">design.angle =</span> <span class="dv">90</span>,</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>                      <span class="at">edge.protocol =</span> <span class="st">"minus"</span>,</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>                      <span class="at">truncation =</span> <span class="dv">2000</span>,</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>                      <span class="at">coverage.grid =</span> cover)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul style="color:blue; font-size:100%">
<li>
What spacing would you select for this design?
</li><li>
What is the maximum trackline length for the design you have selected?
</li><li>
What on-effort line length are we likely to achieve?
</li></ul>
</section>
<section id="zigzag-design" class="level2">
<h2 class="anchored" data-anchor-id="zigzag-design">Zigzag Design</h2>
<p>Zigzag designs are often more efficient in their use of effort having less off-effort transit time between transects. For this survey another option would be to complete a boat-based survey. The boat survey will have the same total effort available allowing us a trackline length of 250 km.</p>
<p>Let us now define a zigzag design for the same region. For zigzag designs the design angle has a different definition, it describes the angle across which the zigzags are constructed. For this example we want a vertical design angle so we will set it to 0. Zigzag designs also require an additional argument as zigzags can only be created inside convex shapes. We therefore need to specify the bounding shape, here we will choose a convex hull as it is more efficient than a minimum bounding rectangle. A convex hull works as if we were stretching an elastic band around the survey region. The code below shows you how to create the zigzag design, you should then create a single realisation of this design and plot it to check it looks acceptable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the zigzag design</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>design.zz<span class="fl">.4500</span> <span class="ot">&lt;-</span> <span class="fu">make.design</span>(<span class="at">region =</span> region,</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>                      <span class="at">transect.type =</span> <span class="st">"line"</span>,</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>                      <span class="at">design =</span> <span class="st">"eszigzag"</span>,</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>                      <span class="at">spacing =</span> <span class="dv">4500</span>,</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>                      <span class="at">design.angle =</span> <span class="dv">0</span>,</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>                      <span class="at">edge.protocol =</span> <span class="st">"minus"</span>,</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>                      <span class="at">bounding.shape =</span> <span class="st">"convex.hull"</span>,</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>                      <span class="at">truncation =</span> <span class="dv">2000</span>,</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>                      <span class="at">coverage.grid =</span> cover)</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>survey.zz <span class="ot">&lt;-</span> <span class="fu">generate.transects</span>(design.zz<span class="fl">.4500</span>)</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(region, survey.zz)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Pr6-instructions_files/figure-html/zzdesign-1.png" class="img-fluid figure-img" width="384"></p>
<p></p><figcaption class="figure-caption">Single survey generated from the equalspaced zigzag design</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>Next we will run a coverage simulation to verify that we have stayed within the restraints of our survey effort; a total trackline length of &lt; 250 km. This time when we run the coverage simulation we will ask it to complete more repetitions so we can also assess the coverage.</p>
First we can output the design statistics.
<ul style="color:blue; font-size:100%">
<li>
Does this design meet our survey effort constraint?
</li><li>
What is the maximum total trackline length for this design?
</li><li>
What line length are we likely to achieve with this design?
</li><li>
Is this higher or lower than the systematic parallel design?
</li></ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Run the coverage simulation</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>design.zz<span class="fl">.4500</span> <span class="ot">&lt;-</span> <span class="fu">run.coverage</span>(design.zz<span class="fl">.4500</span>, <span class="at">reps =</span> <span class="dv">500</span>)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the design statistics</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>design.zz<span class="fl">.4500</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Next we can check the coverage. Sometimes with zigzag surveys generated inside convex hulls we can get areas of higher coverage in narrower parts of the survey region at either end of the design axis. One of the easiest ways to assess coverage is visually by plotting the coverage grid.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the coverage grid</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(design.zz<span class="fl">.4500</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul style="color:blue; font-size:100%">
<li>
Do you think the coverage scores look uniform across the study region?
</li><li>
Where are they higher/lower?
</li><li>
Why do you think this is?
<ul style="color:blue; font-size:100%">
<li>
Note, you can go back to one of your parallel line designs and plot the coverage scores to compare (although there are fewer repetitions you can still get an idea of coverage).
</li></ul>
</li></ul>
<hr>
<hr>
</section>
</section>
<section id="point-transect-bird-survey-in-tentsmuir-forest" class="level1">
<h1>Point Transect Bird Survey in Tentsmuir Forest</h1>
<p><strong>The objective of this exercise is to design a point transect survey looking at songbird abundance in Tentsmuir Forest so that separate estimates of abundance can be obtained for the two strata.</strong></p>
<p>Tenstsmuir Forest is a mature pine forest located on the east coast of Scotland and is a 20 minute drive north of St Andrews. The western area of Tentsmuir around Morton Lochs is of special interest in this study as this part of the forest forms part of the Tentsmuir National Nature Reserve. This study region has therefore been divided into two stratum, the first is the main part of the forest and the second is the area of forest adjacent to Morton Lochs.</p>
<p>Before we begin we must load the distance sampling survey design R library and also the spatial library <em>sf</em>. The <em>sf</em> library needs to be loaded in this example as we need to project the survey region.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dssd)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Linking to GEOS 3.9.1, GDAL 3.4.3, PROJ 7.2.1; sf_use_s2() is TRUE</code></pre>
</div>
</div>
<section id="projecting-your-study-region" class="level2">
<h2 class="anchored" data-anchor-id="projecting-your-study-region">Projecting your Study Region</h2>
<p>This exercise demonstrates how to deal with unprojected shapefiles. Study areas should always be projected onto a flat plane before you use them to design your survey. This is because in most parts of the world one degree latitude is not the same in distance as one degree longitude. If we didnt project, our study region and any surveys generated in it, would be distorted possibly leading to non-uniform coverage.</p>
<p>We will now load the study region and project it onto a flat plane using an Albers Equal Area Conical projection. As we have to project the shapefile we load the shape object separately instead of directly into a region object.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Load the unprojected shapefile</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>shapefile.name <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">"extdata"</span>, <span class="st">"TentsmuirUnproj.shp"</span>, <span class="at">package =</span> <span class="st">"dssd"</span>)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>sf.shape <span class="ot">&lt;-</span> <span class="fu">read_sf</span>(shapefile.name)</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Check current coordinate reference system</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="fu">st_crs</span>(sf.shape)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Coordinate Reference System:
  User input: WGS 84 
  wkt:
GEOGCRS["WGS 84",
    DATUM["World Geodetic System 1984",
        ELLIPSOID["WGS 84",6378137,298.257223563,
            LENGTHUNIT["metre",1]]],
    PRIMEM["Greenwich",0,
        ANGLEUNIT["degree",0.0174532925199433]],
    CS[ellipsoidal,2],
        AXIS["latitude",north,
            ORDER[1],
            ANGLEUNIT["degree",0.0174532925199433]],
        AXIS["longitude",east,
            ORDER[2],
            ANGLEUNIT["degree",0.0174532925199433]],
    ID["EPSG",4326]]</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define a European Albers Equal Area projection</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>proj4string <span class="ot">&lt;-</span> <span class="st">"+proj=aea +lat_1=56 +lat_2=62 +lat_0=50 +lon_0=-3 +x_0=0 </span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="st">                +y_0=0 +ellps=intl +units=m"</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Project the study area on to a flat plane</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>projected.shape <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(sf.shape, <span class="at">crs =</span> proj4string)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can now create the region object for <code>dssd</code> using the projected shape and plot it to check what it looks like.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the survey region in dssd</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>region.tm <span class="ot">&lt;-</span> <span class="fu">make.region</span>(<span class="at">region.name =</span> <span class="st">"Tentsmuir"</span>,</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>                         <span class="at">strata.name =</span> <span class="fu">c</span>(<span class="st">"Main Area"</span>, <span class="st">"Morton Lochs"</span>),</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>                         <span class="at">shape =</span> projected.shape)</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the survey region</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(region.tm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Pr6-instructions_files/figure-html/makeregion-1.png" class="img-fluid figure-img" width="576"></p>
<p></p><figcaption class="figure-caption">Tentsmuir Forest: showing the main stratumand the Morton Loch stratum.</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
<section id="coverage-1" class="level2">
<h2 class="anchored" data-anchor-id="coverage-1">Coverage</h2>
<p>The next step is to set up a coverage grid. A coverage grid is a grid of regularly spaced points and is used to assess whether each point in the survey region is equally likely to sampled. The coverage grid needs to be created before the coverage simulation is run.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set up coverage grid</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>cover.tm <span class="ot">&lt;-</span> <span class="fu">make.coverage</span>(region.tm, <span class="at">n.grid.points =</span> <span class="dv">1000</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="design" class="level2">
<h2 class="anchored" data-anchor-id="design">Design</h2>
<p>You are now going to set up a systematic point transect design. We will assume that we have sufficient resources to survey 40 point transects. As the Morton Lochs stratum is of special interest we will give it higher coverage. We will therefore explicitly allocate 25 samplers to the main stratum and 15 to the Morton Lochs stratum (note that the area of the Morton Lochs stratum is much small than the main stratum). If we wanted to allocate the same effort to both stratum we could provide the samplers argument with the single value of 40 and it would divide the effort equally between the strata. We will leave the design angle as 0 and set the truncation distance to 100 m. We will use a minus sampling approach at the edges.</p>
<ul style="color:blue; font-size:100%">
<li>
What are the analysis implications of a design with unequal coverage?
</li></ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set up a multi strata systematic point transect design</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>design.tm <span class="ot">&lt;-</span> <span class="fu">make.design</span>(<span class="at">region =</span> region.tm,</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>                         <span class="at">transect.type =</span> <span class="st">"point"</span>,</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>                         <span class="at">design =</span> <span class="st">"systematic"</span>,</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>                         <span class="at">samplers =</span> <span class="fu">c</span>(<span class="dv">25</span>,<span class="dv">15</span>),</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>                         <span class="at">design.angle =</span> <span class="dv">0</span>,</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>                         <span class="at">edge.protocol =</span> <span class="st">"minus"</span>,</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>                         <span class="at">truncation =</span> <span class="dv">100</span>,</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>                         <span class="at">coverage.grid =</span> cover.tm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="generate-a-survey" class="level2">
<h2 class="anchored" data-anchor-id="generate-a-survey">Generate a Survey</h2>
<p>You will now generate a single survey from this design and plot it inside the survey region to check what it looks like. If you want to check whether the covered areas of the samplers in the Morton Lochs stratum overlap add the argument <em>covered.area = TRUE</em> to the plot function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a single survey from the design</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>survey.tm <span class="ot">&lt;-</span> <span class="fu">generate.transects</span>(design.tm)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the region and the survey</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(region.tm, survey.tm, <span class="at">covered.area =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Pr6-instructions_files/figure-html/surveytm-1.png" class="img-fluid figure-img" width="384"></p>
<p></p><figcaption class="figure-caption">Single survey generated from the systematicparallel line design</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>Now look at the survey information.</p>
<ul style="color:blue; font-size:100%">
<li>
What spacing was used in each strata to try and achieve the desired number of samplers?
</li><li>
Did your survey achieve exactly the number of samplers you requested?
</li><li>
How much does coverage differ between the two strata for this realisation?
</li></ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Display survey information</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>survey.tm</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="save-coordinates-to-a-file" class="level3">
<h3 class="anchored" data-anchor-id="save-coordinates-to-a-file">Save coordinates to a file</h3>
<p>If this survey is to be conducted in the field, you will want the coordinates that you can load into a handheld GPS. The function <code>write.transects()</code> can write waypoints of the survey (in this case the point transect stations) to text, comma-separated value or GPX files.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.transects</span>(survey.tm,</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">dsn =</span> <span class="st">"tentsmuir-points.gpx"</span>,</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">layer =</span> <span class="st">"points"</span>,</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">dataset.options =</span> <span class="st">"GPX_USE_EXTENSIONS=yes"</span>,</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">proj4string=</span>sf<span class="sc">::</span><span class="fu">st_crs</span>(sf.shape))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The GPX file can be transferred to a GPS, or viewed using Google Earth.</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="google-earth.jpg" class="img-fluid figure-img" style="width:60.0%"></p>
<p></p><figcaption class="figure-caption">Realised survey with locations written to GPX file and imported into Google Earth.</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="assessing-coverage-and-design-statistics" class="level2">
<h2 class="anchored" data-anchor-id="assessing-coverage-and-design-statistics">Assessing Coverage and Design Statistics</h2>
<p>We will now run a coverage simulation to assess how much the number of samplers and average coverage varies between surveys. We will also be able to assess how coverage varies spatially to see if edge effects are of concern.</p>
View the design statistics, then answer these questions.
<ul style="color:blue; font-size:100%">
<li>
What is the minimum number of samplers you will achieve in each strata?
</li><li>
Is this sufficient to complete separate analyses in each stratum?
</li></ul>
Next plot the coverage scores.
<ul style="color:blue; font-size:100%">
<li>
Does it appear that there is even coverage within each strata?
<ul style="color:blue; font-size:100%">
<li>
As there is such a difference in the range of coverage scores between strata you may need to plot each strata individually.
</li></ul>
</li></ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View the design statistics</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>design.tm</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
   Strata Main Area:
   __________________
Design:  systematically spaced transects
Spacing:  NA
Number of samplers:  25
Design angle:  0
Edge protocol:  minus

   Strata Morton Lochs:
   _____________________
Design:  systematically spaced transects
Spacing:  NA
Number of samplers:  15
Design angle:  0
Edge protocol:  minus

Strata areas:  14108643, 715265
Region units:  m
Coverage Simulation repetitions:  100

    Number of samplers:
    
        Main Area Morton Lochs Total
Minimum      22.0         13.0  36.0
Mean         25.1         15.1  40.2
Median       25.0         15.0  40.0
Maximum      27.0         18.0  44.0
sd            0.9          1.1   1.3

    Covered area:
    
        Main Area Morton Lochs      Total
Minimum 683662.63    363258.99 1076099.58
Mean    768186.34    420283.45 1188469.79
Median  772479.34    417730.22 1188447.46
Maximum 816669.52    468461.70 1264365.86
sd       25071.81     25394.87   32875.01

    % of region covered:
    
        Main Area Morton Lochs Total
Minimum      4.85        50.79  7.26
Mean         5.44        58.76  8.02
Median       5.48        58.40  8.02
Maximum      5.79        65.49  8.53
sd           0.18         3.55  0.22

    Coverage Score Summary:
    
         Main Area Morton Lochs      Total
Minimum 0.00000000    0.2200000 0.00000000
Mean    0.05483087    0.5750000 0.08094378
Median  0.05000000    0.6450000 0.06000000
Maximum 0.15000000    0.7800000 0.78000000
sd      0.02997747    0.1456197 0.12170445</code></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the coverage scores</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(design.tm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Pr6-instructions_files/figure-html/coveragetmdisplay-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot coverage scores for individual strata</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="co"># plot(design.tm, strata.id = 1)</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="co"># plot(design.tm, strata.id = 2)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>